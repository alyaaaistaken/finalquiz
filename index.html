<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All-in-One Puzzles & Quizzes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #121212;
            --bg-medium: #1e1e1e;
            --bg-light: #2a2a2a;
            --primary-accent: #64ffda; /* Teal */
            --secondary-accent: #ff6e40; /* Orange */
            --text-light: #e0e0e0;
            --text-dark: #000;
            --border-color: #333;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
        }

        /* --- Base & Layout --- */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background: linear-gradient(135deg, var(--bg-dark), var(--bg-medium));
            color: var(--text-light);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        #sidebar {
            width: 250px;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border-color);
            box-shadow: 5px 0 15px rgba(0,0,0,0.2);
        }

        #sidebar h1 {
            font-family: 'Press Start 2P', cursive;
            color: var(--primary-accent);
            font-size: 1.5em;
            text-shadow: 2px 2px var(--secondary-accent);
            margin-bottom: 40px;
            text-align: center;
        }

        .nav-btn {
            background: var(--bg-medium);
            color: var(--text-light);
            border: 1px solid var(--border-color);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--primary-accent);
            color: var(--text-dark);
            border-color: var(--primary-accent);
            transform: translateX(5px);
        }

        main {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .game-view {
            display: none;
        }

        .game-view.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
        }

        .game-card {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            flex: 1;
            min-width: 45%;
            transition: transform 0.3s ease;
        }

        h2 {
            color: var(--secondary-accent);
            text-align: center;
            margin-top: 0;
            margin-bottom: 25px;
            font-weight: 700;
            border-bottom: 2px solid var(--primary-accent);
            padding-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
        }

        button {
            background: linear-gradient(45deg, var(--primary-accent), #40c9ff);
            color: var(--text-dark);
            border: none;
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin-top: 15px;
        }

        button:hover:not(:disabled) {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.7;
        }

        canvas {
            border: 2px solid var(--primary-accent);
            background: var(--bg-medium);
            border-radius: 10px;
        }
        
        /* --- Hangman & T/F Quiz Specifics --- */
        #hangman-display { text-align: center; }
        #guessesLeft { font-weight: bold; color: var(--secondary-accent); font-size: 1.3em; }
        #gameStatus { font-size: 1.2em; margin-top: 15px; font-weight: bold; height: 2em; }
        #quiz-questions { width: 100%; max-height: 400px; overflow-y: auto; margin-top: 20px; padding-right: 10px; }
        .question { margin-bottom: 15px; padding: 12px; border-radius: 8px; background-color: var(--bg-light); text-align: left; border-left: 5px solid transparent; }
        .question.correct { border-left-color: var(--correct-color); }
        .question.incorrect { border-left-color: var(--incorrect-color); }
        .question div { margin-top: 10px; }
        .question label { margin-right: 20px; cursor: pointer; }

        /* --- Crossword Specifics --- */
        #crossword { display: flex; flex-direction: column; align-items: center; }
        #crossword-main { display: flex; gap: 20px; width: 100%; }
        #crossword-clues { flex: 1; max-height: 350px; overflow-y: auto; padding-right: 10px; }
        #crossword-clues h3 { color: var(--primary-accent); }
        #crossword-clues ul { list-style: none; padding: 0; }
        #crossword-clues li { margin-bottom: 8px; font-size: 0.9em; }
        #crossword-clues li.completed { text-decoration: line-through; color: #888; }
        #crossword-grid-container { flex: 1; display: flex; justify-content: center; align-items: center; }
        #crossword-grid { display: grid; gap: 2px; }
        .grid-cell { width: 35px; height: 35px; background-color: var(--bg-medium); border: 1px solid var(--border-color); color: var(--text-light); font-size: 1.2em; text-align: center; line-height: 35px; text-transform: uppercase; position: relative; }
        .clue-number { position: absolute; top: 1px; left: 2px; font-size: 0.6em; color: var(--primary-accent); }
        .hidden-cell { background-color: transparent; border: none; }
        #crossword-input-area { margin-top: 20px; text-align: center; }
        #crossword-input-area input { padding: 8px; border-radius: 5px; border: 1px solid var(--border-color); background: var(--bg-medium); color: var(--text-light); margin: 0 5px; width: 50px; }
        #crossword-input-area #answerInput { width: 150px; }
        #crosswordStatus { margin-top: 15px; font-weight: bold; height: 1.5em; }

        /* --- Kahoot Quiz Specifics --- */
        #kahoot-view .game-card { min-width: 90%; text-align: center; }
        #kahoot-start-screen h2 { font-family: 'Press Start 2P', cursive; font-size: 2em; border: none; }
        #kahoot-quiz-screen { display: none; }
        #kahoot-results-screen { display: none; }
        .kahoot-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; font-weight: bold; }
        .timer-bar-container { width: 100%; background-color: var(--bg-light); border-radius: 9999px; height: 1rem; margin-bottom: 1.5rem; }
        .timer-bar-inner { background-color: var(--text-light); height: 1rem; border-radius: 9999px; transition: width 1s linear; }
        .kahoot-question-box { background-color: var(--text-light); color: var(--text-dark); padding: 2rem; border-radius: 0.5rem; margin-bottom: 1.5rem; min-height: 150px; display: flex; align-items: center; justify-content: center; }
        .kahoot-question-text { font-size: 1.8rem; font-weight: bold; text-align: center; }
        .kahoot-answers-grid { display: grid; grid-template-columns: repeat(1, 1fr); gap: 1rem; }
        @media (min-width: 768px) { .kahoot-answers-grid { grid-template-columns: repeat(2, 1fr); } }
        .answer-btn { background-color: var(--bg-medium); border: 2px solid var(--border-color); padding: 1rem; border-radius: 0.5rem; display: flex; align-items: center; font-size: 1.1rem; font-weight: bold; color: var(--text-light); transition: all 0.2s ease-in-out; margin-top: 0; }
        .answer-btn:hover { border-color: var(--primary-accent); }
        .answer-btn .shape { width: 2.5rem; height: 2.5rem; flex-shrink: 0; margin-right: 1rem; background-color: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; border-radius: 0.375rem; }
        .answer-btn.correct { background-color: var(--correct-color); border-color: var(--correct-color); animation: pulse-correct 1s; }
        .answer-btn.incorrect { opacity: 0.5; animation: shake-incorrect 0.5s; }
        @keyframes pulse-correct { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        @keyframes shake-incorrect { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
    </style>
</head>
<body>

    <aside id="sidebar">
        <h1>Puzzles &amp; Quizzes</h1>
        <button class="nav-btn active" onclick="showView('hangman-view')">Hangman Quiz</button>
        <button class="nav-btn" onclick="showView('crossword-view')">Crossword Puzzle</button>
        <button class="nav-btn" onclick="showView('kahoot-view')">Multiple Choice</button>
    </aside>

    <main>
        <!-- Hangman View -->
        <div id="hangman-view" class="game-view active">
             <div class="container">
                <div class="game-card">
                    <h2>Hangman: True or False Edition</h2>
                    <div id="hangman-display">
                        <canvas id="hangmanCanvas" width="250" height="280"></canvas>
                        <p>Incorrect Answers Remaining: <span id="guessesLeft">6</span></p>
                        <p id="gameStatus"></p>
                    </div>
                    <div id="quiz-questions"></div>
                    <button onclick="newHangmanGame()">New Game</button>
                </div>
            </div>
        </div>

        <!-- Crossword View -->
        <div id="crossword-view" class="game-view">
            <div class="container">
                <div id="crossword" class="game-card">
                    <h2>Crossword Challenge</h2>
                    <div id="crossword-main">
                        <div id="crossword-clues">
                            <h3>Hardware</h3>
                            <ul id="hardware-clues"></ul>
                            <h3>Behaviorism</h3>
                            <ul id="behaviorism-clues"></ul>
                        </div>
                        <div id="crossword-grid-container">
                            <div id="crossword-grid"></div>
                        </div>
                    </div>
                    <div id="crossword-input-area">
                        <label for="clueInput">Clue #:</label>
                        <input type="number" id="clueInput" min="1">
                        <label for="answerInput">Answer:</label>
                        <input type="text" id="answerInput">
                        <button onclick="submitCrosswordAnswer()">Submit</button>
                    </div>
                    <p id="crosswordStatus"></p>
                </div>
            </div>
        </div>

        <!-- Multiple Choice (Kahoot Style) View -->
        <div id="kahoot-view" class="game-view">
            <div class="container">
                <div class="game-card">
                    <!-- Start Screen -->
                    <div id="kahoot-start-screen">
                        <h2>Hardware & Behaviorism Challenge</h2>
                        <p class="text-xl my-8">A 60-question quiz on computer components and AI paradigms.</p>
                        <button id="kahoot-start-btn">Start Quiz</button>
                    </div>

                    <!-- Quiz Screen -->
                    <div id="kahoot-quiz-screen">
                        <div class="kahoot-header">
                            <div id="kahoot-question-counter">Question 1/60</div>
                            <div id="kahoot-score">Score: 0</div>
                        </div>
                        <div class="timer-bar-container">
                            <div id="kahoot-timer-bar" class="timer-bar-inner" style="width: 100%;"></div>
                        </div>
                        <div class="kahoot-question-box">
                            <h2 id="kahoot-question-text" class="kahoot-question-text">Question text goes here...</h2>
                        </div>
                        <div class="kahoot-answers-grid">
                            <button class="answer-btn">
                                <div class="shape">▲</div>
                                <span class="answer-text-0">Answer 1</span>
                            </button>
                            <button class="answer-btn">
                                <div class="shape">◆</div>
                                <span class="answer-text-1">Answer 2</span>
                            </button>
                            <button class="answer-btn">
                                <div class="shape">●</div>
                                <span class="answer-text-2">Answer 3</span>
                            </button>
                            <button class="answer-btn">
                                <div class="shape">■</div>
                                <span class="answer-text-3">Answer 4</span>
                            </button>
                        </div>
                        <button id="kahoot-next-btn" style="display: none;">Next</button>
                    </div>

                    <!-- Results Screen -->
                    <div id="kahoot-results-screen" class="text-center">
                         <h2>Quiz Complete!</h2>
                        <div class="bg-white/10 rounded-lg shadow-2xl p-8 inline-block my-4">
                            <p class="text-2xl font-bold">Your Final Score:</p>
                            <p id="kahoot-final-score" class="text-7xl font-black my-4 text-green-500">0</p>
                            <p id="kahoot-score-percentage" class="text-xl">You got 0/60 correct!</p>
                        </div>
                        <button id="kahoot-play-again-btn">Play Again</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // =====================================
        // --- GLOBAL NAVIGATION & SETUP ---
        // =====================================
        const navButtons = document.querySelectorAll('.nav-btn');
        const gameViews = document.querySelectorAll('.game-view');

        function showView(viewId) {
            gameViews.forEach(view => {
                view.classList.remove('active');
            });
            navButtons.forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(viewId).classList.add('active');
            document.querySelector(`.nav-btn[onclick="showView('${viewId}')"]`).classList.add('active');
        }

        window.onload = () => {
            initializeAllGames();
            showView('hangman-view');
        };

        function initializeAllGames() {
            newHangmanGame();
            initializeCrossword();
            setupKahoot();
        }

        // --- Web Audio API for Sound Effects ---
        let audioContext;
        function playTone(isCorrect) {
            if (!audioContext) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.error("Web Audio API is not supported in this browser");
                    return;
                }
            }
            if (audioContext.state === 'suspended') {
                 audioContext.resume();
            }
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.type = 'triangle';
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
            
            if (isCorrect) {
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.3);
            } else {
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.4);
            }
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.4);
        }

        // =====================================
        // --- HANGMAN & T/F QUIZ LOGIC ---
        // =====================================
        let hangmanGuessesLeft = 6;
        let hangmanAnsweredQuestions = 0;
        const hangmanTotalQuestions = 10;
        const hangmanGameStatusEl = document.getElementById('gameStatus');
        const hangmanGuessesLeftEl = document.getElementById('guessesLeft');
        const hangmanQuizContainer = document.getElementById('quiz-questions');
        const hangmanCanvas = document.getElementById('hangmanCanvas');
        const hangmanCtx = hangmanCanvas.getContext('2d');

        const hangmanQuizData = [
            { question: "The CPU is responsible for long-term data storage.", answer: 'false' },
            { question: "RAM is a type of volatile memory.", answer: 'true' },
            { question: "SSDs use spinning platters.", answer: 'false' },
            { question: "The motherboard connects all major components.", answer: 'true' },
            { question: "Cache memory is slower than RAM.", answer: 'false' },
            { question: "Classical conditioning involves learning through consequences.", answer: 'false' },
            { question: "Reinforcement aims to increase a behavior.", answer: 'true' },
            { question: "Punishment is designed to strengthen a behavior.", answer: 'false' },
            { question: "Extinction is the weakening of a conditioned response.", answer: 'true' },
            { question: "Pavlov's experiments are an example of operant conditioning.", answer: 'false' }
        ];

        function drawHangman(errors) {
            hangmanCtx.clearRect(0, 0, hangmanCanvas.width, hangmanCanvas.height);
            hangmanCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--primary-accent').trim();
            hangmanCtx.lineWidth = 3;
            hangmanCtx.beginPath();
            hangmanCtx.moveTo(30, 270); hangmanCtx.lineTo(130, 270);
            hangmanCtx.moveTo(80, 270); hangmanCtx.lineTo(80, 50);
            hangmanCtx.lineTo(180, 50); hangmanCtx.lineTo(180, 80);
            hangmanCtx.stroke();
            hangmanCtx.beginPath();
            if (errors >= 1) hangmanCtx.arc(180, 105, 25, 0, Math.PI * 2);
            if (errors >= 2) { hangmanCtx.moveTo(180, 130); hangmanCtx.lineTo(180, 200); }
            if (errors >= 3) { hangmanCtx.moveTo(180, 150); hangmanCtx.lineTo(140, 180); }
            if (errors >= 4) { hangmanCtx.moveTo(180, 150); hangmanCtx.lineTo(220, 180); }
            if (errors >= 5) { hangmanCtx.moveTo(180, 200); hangmanCtx.lineTo(140, 240); }
            if (errors >= 6) { hangmanCtx.moveTo(180, 200); hangmanCtx.lineTo(220, 240); }
            hangmanCtx.stroke();
        }
        
        function populateHangmanQuiz() {
            hangmanQuizContainer.innerHTML = '';
            hangmanQuizData.forEach((item, index) => {
                const qDiv = document.createElement('div');
                qDiv.className = 'question';
                qDiv.id = `hq${index + 1}`;
                qDiv.innerHTML = `<p>${index + 1}. ${item.question}</p><div><label><input type="radio" name="hq${index + 1}" value="true"> True</label><label><input type="radio" name="hq${index + 1}" value="false"> False</label><button onclick="checkHangmanAnswer(${index + 1}, '${item.answer}')">Submit</button></div>`;
                hangmanQuizContainer.appendChild(qDiv);
            });
        }

        function checkHangmanAnswer(qNum, correctAnswer) {
            const radios = document.getElementsByName(`hq${qNum}`);
            let selectedAnswer;
            for (const radio of radios) if (radio.checked) selectedAnswer = radio.value;
            if (!selectedAnswer) return alert('Please select an answer.');

            const qDiv = document.getElementById(`hq${qNum}`);
            qDiv.querySelector('button').disabled = true;
            radios.forEach(r => r.disabled = true);
            hangmanAnsweredQuestions++;

            if (selectedAnswer !== correctAnswer) {
                hangmanGuessesLeft--;
                qDiv.classList.add('incorrect');
                drawHangman(6 - hangmanGuessesLeft);
            } else {
                qDiv.classList.add('correct');
            }
            
            hangmanGuessesLeftEl.textContent = hangmanGuessesLeft;
            checkHangmanStatus();
        }

        function checkHangmanStatus() {
            if (hangmanGuessesLeft <= 0) {
                hangmanGameStatusEl.textContent = 'Game Over! You Lost.';
                hangmanGameStatusEl.style.color = 'var(--incorrect-color)';
                disableAllHangmanButtons();
            } else if (hangmanAnsweredQuestions === hangmanTotalQuestions) {
                hangmanGameStatusEl.textContent = 'Congratulations! You Win!';
                hangmanGameStatusEl.style.color = 'var(--correct-color)';
                disableAllHangmanButtons();
            }
        }
        
        function disableAllHangmanButtons() {
            document.querySelectorAll('#quiz-questions button').forEach(b => b.disabled = true);
        }

        function newHangmanGame() {
            hangmanGuessesLeft = 6;
            hangmanAnsweredQuestions = 0;
            hangmanGuessesLeftEl.textContent = hangmanGuessesLeft;
            hangmanGameStatusEl.textContent = '';
            populateHangmanQuiz();
            drawHangman(0);
        }
        
        // =====================================
        // --- CROSSWORD LOGIC ---
        // =====================================
        const crosswordGridEl = document.getElementById('crossword-grid');
        const hardwareCluesEl = document.getElementById('hardware-clues');
        const behaviorismCluesEl = document.getElementById('behaviorism-clues');
        const clueInputEl = document.getElementById('clueInput');
        const answerInputEl = document.getElementById('answerInput');
        const crosswordStatusEl = document.getElementById('crosswordStatus');

        const crosswordData = [
            { id: 1, answer: "RAM", clue: "Volatile memory", r: 0, c: 3, dir: "across" },
            { id: 2, answer: "MOTHERBOARD", clue: "Connects all components", r: 2, c: 0, dir: "across" },
            { id: 3, answer: "GPU", clue: "Graphics processing unit", r: 4, c: 4, dir: "across" },
            { id: 4, answer: "CPU", clue: "Brain of the computer", r: 0, c: 0, dir: "down" },
            { id: 5, answer: "PSU", clue: "Converts AC to DC", r: 0, c: 6, dir: "down" },
            { id: 6, answer: "PAVLOV", clue: "Pioneer of classical conditioning", r: 0, c: 1, dir: "down" },
            { id: 7, answer: "OPERANT", clue: "Learning via consequences", r: 1, c: 5, dir: "down" },
            { id: 8, answer: "REWARD", clue: "A positive reinforcer", r: 4, c: 0, dir: "across" },
            { id: 9, answer: "EXTINCTION", clue: "Weakening of a response", r: 6, c: 0, dir: "across" }
        ];

        let crosswordGridState = [];
        let completedWords = new Set();
        
        function initializeCrossword() {
            let maxR = 0, maxC = 0;
            crosswordData.forEach(word => {
                let endR = word.dir === 'down' ? word.r + word.answer.length - 1 : word.r;
                let endC = word.dir === 'across' ? word.c + word.answer.length - 1 : word.c;
                if (endR > maxR) maxR = endR;
                if (endC > maxC) maxC = endC;
            });
            const gridRows = maxR + 1;
            const gridCols = maxC + 1;

            crosswordGridState = Array(gridRows).fill().map(() => Array(gridCols).fill(null));
            
            crosswordData.forEach(word => {
                for (let i = 0; i < word.answer.length; i++) {
                    const r = word.dir === 'down' ? word.r + i : word.r;
                    const c = word.dir === 'across' ? word.c + i : word.c;
                    if (!crosswordGridState[r][c]) crosswordGridState[r][c] = { value: '', isStart: false, clueNum: null };
                    if (i === 0) {
                        crosswordGridState[r][c].isStart = true;
                        crosswordGridState[r][c].clueNum = word.id;
                    }
                }
            });

            crosswordGridEl.innerHTML = '';
            hardwareCluesEl.innerHTML = '';
            behaviorismCluesEl.innerHTML = '';
            completedWords.clear();
            crosswordStatusEl.textContent = '';
            crosswordGridEl.style.gridTemplateColumns = `repeat(${gridCols}, 35px)`;

            for (let r = 0; r < gridRows; r++) {
                for (let c = 0; c < gridCols; c++) {
                    const cell = document.createElement('div');
                    if (crosswordGridState[r][c]) {
                        cell.className = 'grid-cell';
                        cell.id = `cell-${r}-${c}`;
                        if (crosswordGridState[r][c].isStart) {
                           cell.innerHTML = `<span class="clue-number">${crosswordGridState[r][c].clueNum}</span>`;
                        }
                    } else {
                        cell.className = 'hidden-cell';
                    }
                    crosswordGridEl.appendChild(cell);
                }
            }
            
            crosswordData.forEach(word => {
                const li = document.createElement('li');
                li.id = `clue-${word.id}`;
                li.innerHTML = `<strong>${word.id}.</strong> ${word.clue} <em>(${word.dir})</em>`;
                if (word.id <= 5) hardwareCluesEl.appendChild(li);
                else behaviorismCluesEl.appendChild(li);
            });
        }
        
        function submitCrosswordAnswer() {
            const clueNum = parseInt(clueInputEl.value);
            const answer = answerInputEl.value.toUpperCase();
            const wordData = crosswordData.find(w => w.id === clueNum);
            
            if (!wordData) {
                crosswordStatusEl.textContent = 'Invalid clue number.';
                crosswordStatusEl.style.color = 'var(--incorrect-color)';
                return;
            }
            
            if (answer === wordData.answer) {
                crosswordStatusEl.textContent = 'Correct!';
                crosswordStatusEl.style.color = 'var(--correct-color)';
                
                for (let i = 0; i < wordData.answer.length; i++) {
                    const r = wordData.dir === 'down' ? wordData.r + i : wordData.r;
                    const c = wordData.dir === 'across' ? wordData.c + i : word.c;
                    const cell = document.getElementById(`cell-${r}-${c}`);
                    cell.innerHTML = (cell.querySelector('.clue-number')?.outerHTML || '') + wordData.answer[i];
                }
                
                document.getElementById(`clue-${clueNum}`).classList.add('completed');
                completedWords.add(clueNum);
                clueInputEl.value = '';
                answerInputEl.value = '';

                if (completedWords.size === crosswordData.length) {
                    crosswordStatusEl.textContent = 'Congratulations! Crossword complete!';
                }

            } else {
                crosswordStatusEl.textContent = 'Incorrect. Try again.';
                crosswordStatusEl.style.color = 'var(--incorrect-color)';
            }
        }
        
        // =====================================
        // --- KAHOOT MULTIPLE CHOICE LOGIC ---
        // =====================================
        const kahootHardwareQuestions = [
            { question: "What are the main functions of the CPU?", answers: ["Process instructions, perform calculations, manage data flow", "Store data permanently and manage audio", "Cool the system and provide power", "Display graphics and connect to the internet"], correct: 0 },
            { question: "What is the role of the Control Unit (CU)?", answers: ["Directs data flow and controls operations of CPU", "Performs all math problems", "Stores frequently used data", "Regulates voltage to the motherboard"], correct: 0 },
            { question: "What does the ALU (Arithmetic Logic Unit) do?", answers: ["Performs arithmetic and logical operations", "Manages the computer's memory", "Initializes the computer when it boots up", "Sends signals to the monitor"], correct: 0 },
            { question: "What is CPU cache used for?", answers: ["Stores frequently used data for faster access", "Long-term file storage", "Running the operating system", "Cooling the central processor"], correct: 0 },
            { question: "What does clock speed measure?", answers: ["Number of cycles per second (GHz)", "How much data can be stored", "The speed of the internet connection", "The physical size of the CPU"], correct: 0 },
            { question: "What’s the difference between single-core and multi-core CPUs?", answers: ["Single handles one task at a time, multi can handle multiple tasks simultaneously", "Single-core is for laptops; multi-core is for desktops", "Single-core is faster but less efficient", "There is no major difference in performance"], correct: 0 },
            { question: "What is the difference between integrated and dedicated GPUs?", answers: ["Integrated shares system resources, dedicated has its own VRAM", "Integrated is faster; dedicated is cheaper", "Integrated is for gaming; dedicated is for office work", "Integrated is a physical card; dedicated is built into the CPU"], correct: 0 },
            { question: "What is VRAM and why is it important?", answers: ["Video memory, stores graphics data for rendering", "Virtual RAM, used by the OS for multitasking", "Voltage RAM, which helps regulate power", "Volatile RAM, which is the main system memory"], correct: 0 },
            { question: "What do shaders and cores in GPUs handle?", answers: ["Shaders = effects/lighting, cores = parallel processing tasks", "Shaders cool the GPU; cores process the data", "Shaders manage power; cores handle graphics output", "Shaders connect to the display; cores perform calculations"], correct: 0 },
            { question: "What is ray-tracing used for?", answers: ["Simulates realistic light and shadows", "Increasing the speed of the GPU", "Compressing video files for storage", "Connecting multiple monitors"], correct: 0 },
            { question: "What is the function of a motherboard’s chipset?", answers: ["Controls communication between CPU, RAM, storage, and peripherals", "Provides power to all the components", "Cools the motherboard and CPU", "Stores the operating system"], correct: 0 },
            { question: "What is BIOS/UEFI?", answers: ["Firmware that initializes hardware and loads OS", "The computer's main operating system", "A type of computer virus", "A software for overclocking the CPU"], correct: 0 },
            { question: "What are PCIe and M.2 slots used for?", answers: ["Expansion cards, GPUs, SSDs, Wi-Fi cards", "Plugging in the power supply", "Connecting USB devices and headphones", "Holding the CPU in place"], correct: 0 },
            { question: "What is the purpose of RAM in a computer?", answers: ["Temporary storage for active processes and data", "Permanent storage for all files and the OS", "To display images on the screen", "To connect the computer to the internet"], correct: 0 },
            { question: "How do DDR3, DDR4, and DDR5 differ?", answers: ["Generations differ in speed, bandwidth, and efficiency", "They are different physical sizes of RAM sticks", "DDR3 is for laptops, DDR4 for desktops, and DDR5 for servers", "They are made by different manufacturers"], correct: 0 },
            { question: "What is the main difference between HDD and SSD?", answers: ["HDD = mechanical, slower; SSD = flash memory, faster", "HDD is smaller; SSD is larger", "HDD uses more power; SSD uses less", "HDD is for laptops; SSD is for desktops"], correct: 0 },
            { question: "What does RPM stand for in HDDs?", answers: ["Revolutions per minute", "Reads per minute", "Rotational performance measurement", "Random-access processing mode"], correct: 0 },
            { question: "What is NAND flash memory?", answers: ["Non-volatile storage used in SSDs", "A type of very fast RAM", "A component in the CPU cache", "A brand of hard drive"], correct: 0 },
            { question: "What is the difference between SATA SSD and NVMe SSD?", answers: ["SATA slower, NVMe uses PCIe for higher speed", "SATA is internal, NVMe is external", "SATA is for laptops, NVMe is for servers", "There is no performance difference"], correct: 0 },
            { question: "What do SLC, MLC, TLC, and QLC stand for in NAND flash?", answers: ["Single/ Multi/ Triple/ Quad Level Cell", "Small/ Medium/ Large/ X-Large Capacity", "Standard/ Mid-range/ Top-tier/ Quality Level Cache", "Solid-state/ Multi-layer/ Turbo/ Quantum Logic Chip"], correct: 0 },
            { question: "What does PSU stand for?", answers: ["Power Supply Unit", "Primary System Utility", "Performance Scaling Unit", "Processor Support Unit"], correct: 0 },
            { question: "What is the importance of PSU efficiency ratings (80+ Bronze, Gold, etc.)?", answers: ["Indicates power efficiency and quality", "Shows the maximum power output", "Determines the physical size of the PSU", "It is just a marketing term with no real meaning"], correct: 0 },
            { question: "What is the difference between modular and non-modular PSUs?", answers: ["Modular = detachable cables, non-modular = fixed cables", "Modular PSUs are for liquid cooling, non-modular are for air", "Modular are less efficient than non-modular", "Modular PSUs provide less power"], correct: 0 },
            { question: "What are the main types of cooling in computers?", answers: ["Air cooling and liquid cooling", "Nitrogen cooling and oil cooling", "Passive cooling and active cooling", "Internal cooling and external cooling"], correct: 0 },
            { question: "What is the role of thermal paste?", answers: ["Improves heat transfer between CPU/GPU and cooler", "A glue to hold the CPU in place", "Protects components from dust", "An electrical insulator for the motherboard"], correct: 0 },
            { question: "What is the difference between mechanical and membrane keyboards?", answers: ["Mechanical = switches, tactile; Membrane = rubber dome, quieter", "Mechanical is wireless, Membrane is wired", "Mechanical has RGB, Membrane does not", "There is no difference"], correct: 0 },
            { question: "How do optical mice differ from laser mice?", answers: ["Optical uses LED, laser uses laser for higher precision", "Optical is for gaming, laser is for office work", "Optical is cheaper, laser is more durable", "Laser mice are always wireless"], correct: 0 },
            { question: "What is an example of an input device besides keyboard and mouse?", answers: ["Scanner, microphone, camera", "Monitor, printer, speakers", "CPU, RAM, GPU", "Windows, macOS, Linux"], correct: 0 },
            { question: "What do refresh rate and resolution describe in monitors?", answers: ["Refresh rate = Hz updates/sec, resolution = pixel count", "Refresh rate = brightness, resolution = color accuracy", "Refresh rate = size, resolution = shape", "They are interchangeable terms for image quality"], correct: 0 },
            { question: "What are the main types of printers and their uses?", answers: ["Laser = fast/text, Inkjet = high-quality images, 3D = objects", "Laser = color, Inkjet = black & white, 3D = photos", "All printers function the same way", "Inkjet is for offices, Laser is for home use"], correct: 0 }
        ];
        
        const kahootBehavioristQuestions = [
            { question: "Behaviorist AI mainly focuses on", answers: ["Understanding human emotions", "Observing and imitating behaviors", "Building symbolic reasoning systems", "Creating genetic algorithms"], correct: 1 },
            { question: "The key principle behind Behaviorist AI is", answers: ["Internal representation of knowledge", "Learning through reinforcement", "Random trial and error", "Supervised labeling of data"], correct: 1 },
            { question: "Which concept is most related to Behaviorist AI?", answers: ["Cognitive modeling", "Reinforcement learning", "Symbolic logic", "Genetic programming"], correct: 1 },
            { question: "Behaviorist AI is inspired by which psychological theory?", answers: ["Structuralism", "Behaviorism", "Humanism", "Constructivism"], correct: 1 },
            { question: "In Behaviorist AI, learning is based on", answers: ["Observation of rewards and punishments", "Predefined symbolic rules", "Statistical pattern matching", "Emotional feedback"], correct: 0 },
            { question: "Who is a major figure in traditional behaviorism?", answers: ["Noam Chomsky", "B.F. Skinner", "Alan Turing", "Jean Piaget"], correct: 1 },
            { question: "Behaviorist AI typically uses", answers: ["Neural networks with backpropagation", "Rule-based inference engines", "Trial-and-error learning", "Expert systems"], correct: 2 },
            { question: "In reinforcement learning, the AI agent", answers: ["Chooses actions to maximize rewards", "Memorizes input-output pairs", "Generates rules from data", "Avoids exploration"], correct: 0 },
            { question: "A “reward function” in Behaviorist AI represents", answers: ["User preferences", "Feedback signal for performance", "Probability distribution", "Network topology"], correct: 1 },
            { question: "Behaviorist AI is often applied in", answers: ["Robotics and game playing", "Natural language translation", "Vision recognition", "Quantum computing"], correct: 0 },
            { question: "Reinforcement learning is a form of", answers: ["Supervised learning", "Unsupervised learning", "Trial-based learning", "Symbolic reasoning"], correct: 2 },
            { question: "The term “stimulus-response” best fits", answers: ["Connectionist AI", "Behaviorist AI", "Cognitive AI", "Neural-symbolic systems"], correct: 1 },
            { question: "Behaviorist AI assumes learning occurs through", answers: ["Thinking and planning", "Reaction to environment", "Logical deduction", "Structured memory"], correct: 1 },
            { question: "Which of the following algorithms fits the Behaviorist AI model?", answers: ["Q-learning", "Decision tree", "Naive Bayes", "Support vector machine"], correct: 0 },
            { question: "Behaviorist AI does NOT deal with", answers: ["Hidden mental states", "Observable actions", "Environmental feedback", "Trial outcomes"], correct: 0 },
            { question: "The goal of a reinforcement learning agent is to", answers: ["Minimize exploration", "Maximize total reward", "Match patterns in data", "Infer logical rules"], correct: 1 },
            { question: "In a behaviorist approach, “punishment” is used to", answers: ["Encourage repetition", "Reduce undesired behavior", "Store new data", "Reward the model"], correct: 1 },
            { question: "The feedback loop in Behaviorist AI consists of", answers: ["Input → Output → Storage", "State → Action → Reward → Next state", "Question → Answer → Reasoning", "Input → Hidden → Output layers"], correct: 1 },
            { question: "Which is NOT an example of Behaviorist AI?", answers: ["Q-learning agent", "Pavlovian conditioning model", "Logical theorem prover", "Robot trained by feedback"], correct: 2 },
            { question: "The environment in Behaviorist AI", answers: ["Provides rewards and punishments", "Stores symbolic rules", "Translates text", "Provides labeled datasets"], correct: 0 },
            { question: "Behaviorist AI emphasizes", answers: ["Observing external behavior", "Modeling human consciousness", "Abstract knowledge structures", "Probabilistic inference"], correct: 0 },
            { question: "Which reinforcement learning term refers to an AI’s perception of its surroundings?", answers: ["Reward", "State", "Policy", "Agent"], correct: 1 },
            { question: "The “policy” in Behaviorist AI represents", answers: ["The rulebook for actions", "The dataset", "The emotional model", "The hardware setup"], correct: 0 },
            { question: "Behaviorist AI is less concerned with", answers: ["Internal thought processes", "Stimulus-response mapping", "Reinforcement mechanisms", "Observable outcomes"], correct: 0 },
            { question: "The success of a behaviorist agent is measured by", answers: ["Internal reasoning accuracy", "Accumulated rewards over time", "The number of decisions made", "Size of the dataset"], correct: 1 },
            { question: "The 'exploration vs. exploitation' trade-off is central to which area?", answers: ["Supervised Learning", "Reinforcement Learning", "Knowledge Representation", "Expert Systems"], correct: 1 },
            { question: "An AI that learns to play chess by playing against itself millions of times is using a...", answers: ["Symbolic approach", "Behaviorist approach", "Cognitive approach", "Genetic algorithm"], correct: 1 },
            { question: "What is 'shaping' in the context of behaviorist learning?", answers: ["Rewarding successive approximations of a target behavior", "Providing the AI with a perfect dataset", "Hard-coding rules into the agent", "Observing a human expert"], correct: 0 },
            { question: "Which of these is a form of negative reinforcement?", answers: ["An electric shock for a wrong move", "A food pellet for a correct move", "Removing an annoying loud noise for a correct move", "Doing nothing"], correct: 2 },
            { question: "The 'state' in reinforcement learning describes the agent's current...", answers: ["Emotional condition", "Physical location", "Set of rules", "Situation or configuration"], correct: 3 }
        ];
        
        const kahootQuizData = [...kahootHardwareQuestions, ...kahootBehavioristQuestions];

        // Kahoot DOM Elements
        const kahootStartScreen = document.getElementById('kahoot-start-screen');
        const kahootQuizScreen = document.getElementById('kahoot-quiz-screen');
        const kahootResultsScreen = document.getElementById('kahoot-results-screen');
        const kahootStartBtn = document.getElementById('kahoot-start-btn');
        const kahootNextBtn = document.getElementById('kahoot-next-btn');
        const kahootPlayAgainBtn = document.getElementById('kahoot-play-again-btn');
        const kahootQuestionCounterEl = document.getElementById('kahoot-question-counter');
        const kahootScoreEl = document.getElementById('kahoot-score');
        const kahootTimerBar = document.getElementById('kahoot-timer-bar');
        const kahootQuestionTextEl = document.getElementById('kahoot-question-text');
        const kahootAnswerButtons = document.querySelectorAll('#kahoot-quiz-screen .answer-btn');
        const kahootFinalScoreEl = document.getElementById('kahoot-final-score');
        const kahootScorePercentageEl = document.getElementById('kahoot-score-percentage');

        // Kahoot State
        let kahootCurrentIndex = 0;
        let kahootScore = 0;
        let kahootCorrectCount = 0;
        let kahootTimer;
        let kahootTimeLeft = 20;
        const kahootTotalQuestions = kahootQuizData.length;

        function setupKahoot() {
            kahootStartBtn.addEventListener('click', startKahootQuiz);
            kahootNextBtn.addEventListener('click', showNextKahootQuestion);
            kahootPlayAgainBtn.addEventListener('click', startKahootQuiz);
            kahootAnswerButtons.forEach((button, index) => {
                button.addEventListener('click', () => selectKahootAnswer(button));
            });
        }
        
        function startKahootQuiz() {
            kahootStartScreen.style.display = 'none';
            kahootResultsScreen.style.display = 'none';
            kahootQuizScreen.style.display = 'block';
            kahootCurrentIndex = 0;
            kahootScore = 0;
            kahootCorrectCount = 0;
            kahootScoreEl.textContent = `Score: 0`;
            showKahootQuestion();
        }

        function showKahootQuestion() {
            resetKahootState();
            const questionData = kahootQuizData[kahootCurrentIndex];
            kahootQuestionCounterEl.textContent = `Question ${kahootCurrentIndex + 1}/${kahootTotalQuestions}`;
            kahootQuestionTextEl.textContent = questionData.question;
            
            // We are not shuffling answers in this version for simplicity, using fixed positions
            questionData.answers.forEach((answer, index) => {
                 kahootAnswerButtons[index].querySelector(`.answer-text-${index}`).textContent = answer;
            });
            
            startKahootTimer();
        }

        function resetKahootState() {
            kahootNextBtn.style.display = 'none';
            kahootAnswerButtons.forEach((button, index) => {
                button.disabled = false;
                button.classList.remove('correct', 'incorrect');
                button.style.opacity = 1;
                // Store the correct answer index on the button itself
                button.dataset.correct = (index === kahootQuizData[kahootCurrentIndex].correct);
            });
            kahootTimeLeft = 20;
            kahootTimerBar.style.transition = 'none';
            kahootTimerBar.style.width = '100%';
            setTimeout(() => { kahootTimerBar.style.transition = 'width 1s linear'; }, 50);
        }
        
        function startKahootTimer() {
            kahootTimer = setInterval(() => {
                kahootTimeLeft--;
                kahootTimerBar.style.width = `${(kahootTimeLeft / 20) * 100}%`;
                if (kahootTimeLeft <= 0) {
                    clearInterval(kahootTimer);
                    selectKahootAnswer(null); // Timeout
                }
            }, 1000);
        }

        function selectKahootAnswer(selectedButton) {
            clearInterval(kahootTimer);
            const isCorrect = selectedButton ? selectedButton.dataset.correct === 'true' : false;

            kahootAnswerButtons.forEach(button => {
                button.disabled = true;
                if (button.dataset.correct === 'true') {
                    button.classList.add('correct');
                } else if (button === selectedButton) {
                    button.classList.add('incorrect');
                } else {
                    button.style.opacity = 0.5;
                }
            });
            
            if (isCorrect) {
                kahootCorrectCount++;
                kahootScore += 100 + (kahootTimeLeft * 5);
                kahootScoreEl.textContent = `Score: ${kahootScore}`;
                playTone(true);
            } else {
                playTone(false);
            }

            if (kahootCurrentIndex < kahootQuizData.length - 1) {
                kahootNextBtn.style.display = 'inline-block';
            } else {
                setTimeout(showKahootResults, 2000);
            }
        }
        
        function showNextKahootQuestion() {
            kahootCurrentIndex++;
            showKahootQuestion();
        }
        
        function showKahootResults() {
            kahootQuizScreen.style.display = 'none';
            kahootResultsScreen.style.display = 'block';
            kahootFinalScoreEl.textContent = kahootScore;
            kahootScorePercentageEl.textContent = `You got ${kahootCorrectCount}/${kahootTotalQuestions} correct!`;
        }
    </script>
</body>
</html>
